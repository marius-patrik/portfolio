# Agent Instructions

> **IMPORTANT**: This file contains AI agent-specific instructions and detailed procedures. For fundamental rules, see [RULES](RULES). For project guidelines, see PROJECT.md (or equivalent project documentation file). For command documentation, see [COMMANDS](COMMANDS).

## Agent Rules Structure

The agent rules system consists of two layers:

1. **General Rules** (`agent/RULES_GENERAL/`) - Universal rules that apply to all projects:
   - `RULES` - Fundamental rules for all projects
   - `INSTRUCTIONS` - Detailed procedures and workflows (this file)
   - `COMMANDS` - Command documentation

2. **Project Rules** (`agent/RULES_PROJECT/`) - Project-specific customizations:
   - `RULES` - Custom rules specific to this project
   - `INSTRUCTIONS` - Custom instructions and procedures for this project
   - `COMMANDS` - Custom commands specific to this project

### How Custom Rules Work

- **General rules are always applied** - They provide the foundation for agent behavior
- **Project rules supplement general rules** - They add project-specific requirements, exceptions, or extensions
- **Project rules are read in addition to general rules** - They don't replace general rules, they extend them
- **Use project rules for**:
  - Project-specific coding standards or conventions
  - Technology stack-specific requirements
  - Architecture-specific constraints
  - Custom workflows or procedures
  - Project-specific commands

### Adding Custom Rules

To add project-specific customizations:

1. Edit the corresponding file in `agent/RULES_PROJECT/`:
   - `RULES` for custom rules
   - `INSTRUCTIONS` for custom procedures
   - `COMMANDS` for custom commands

2. Follow the structure and format of the general files
3. Document why custom rules are needed if they differ significantly from general rules
4. Keep custom rules clear and actionable

**Note**: If `PROJECT_RULES` files don't exist or are empty, only general rules apply. Custom rules are optional and should only be added when project-specific requirements exist.

## Project Reference

**MANDATORY**: Before starting any work, review the project documentation which typically contains:

- Project overview and structure
- Technology stack and key dependencies
- Development workflow and build commands
- Code standards and styling guidelines
- Component usage requirements (if applicable)
- Package-specific guidelines (if applicable)
- Architecture decisions

All project guidelines are established in the project documentation. This file focuses on AI agent behavior and task management procedures.

## Session Initialization

**MANDATORY**: At the beginning of every coding session, the agent MUST:

1. **Analyze All Documentation**:
   - Read and understand project documentation (PROJECT.md, README.md, or equivalent) for project guidelines and standards
   - Read README.md for project overview and structure
   - Read TODO.md to understand current tasks and status
   - Read general rules: `agent/RULES_GENERAL/RULES`, `agent/RULES_GENERAL/INSTRUCTIONS`, `agent/RULES_GENERAL/COMMANDS`
   - Read project-specific custom rules (if they exist): `agent/RULES_PROJECT/RULES`, `agent/RULES_PROJECT/INSTRUCTIONS`, `agent/RULES_PROJECT/COMMANDS`
   - Read all package README files if applicable
   - Review component documentation if relevant

2. **Analyze Codebase Structure**:
   - Review package structure and organization
   - Understand component architecture and patterns (if applicable)
   - Review key configuration files (package.json, build configs, etc.)
   - Understand the project's systems, utilities, and patterns
   - Review recent changes if applicable

3. **Analyze All Files (Except Temp Files)**:
   - **MANDATORY**: Read and analyze all files in the codebase at the start of every conversation
   - **EXCEPTION**: Files in the `agent/temp/` directory should be **IGNORED** during initial analysis
   - Temp files are workspace-specific and should not influence general agent behavior
   - All other files should be analyzed to understand the current state of the project
   - This ensures the agent has complete context before starting any work

4. **Establish Context**:
   - Understand the current state of the project
   - Identify any patterns or conventions in use
   - Note any recent changes or ongoing work
   - Prepare to maintain consistency with existing codebase

This initialization ensures the agent has full context before starting any work and maintains consistency with project standards and patterns.

## Task Management Requirements

### Active Todo List Tracking

See [RULES](RULES) for fundamental tracking rules. Detailed procedures:

- For all agent work, create a todo entry in TODO.md before starting work (unless using `:now`)
- Update todo status as work progresses:
  - â¬œ Pending / Not started
  - ðŸ”„ In progress
  - âœ… Completed
  - âŒ Cancelled
- Create todos for complex tasks (3+ steps)
- Reference TODO.md at the start of every coding session

### Planning Before Execution

See [RULES](RULES) for fundamental planning rules. Detailed procedures:

- Break down complex tasks into clear, actionable steps
- Identify dependencies between tasks
- Estimate the scope and complexity
- Prompt the user with the plan before beginning execution
- Wait for user confirmation before proceeding with implementation
- Update the plan if new information is discovered during execution

**Important Considerations**:
- Ensure new code follows existing patterns and conventions
- Maintain consistency in naming, structure, and style across all packages
- Consider how changes affect the overall architecture and consistency
- Consider cross-package dependencies and impacts
- Evaluate how changes to shared systems (build configs, types, styles, etc.) will affect all packages
- Test changes across all affected packages, not just the one being modified
- Plan for cascading updates that may be required in dependent packages

### TODO.md Structure

The TODO.md file is organized into three main sections:

1. **Tasks** - Regular development tasks that can be worked on at any time
   - Features to implement
   - Bugs to fix
   - Refactoring work
   - Documentation updates

2. **Active Checks** - Items that MUST be verified during every coding session
   - These are ongoing requirements that should be checked regularly
   - Examples: ensuring code standards are followed, verifying build configurations, checking documentation accuracy
   - **MANDATORY**: Review and verify these items during every coding session

3. **End of Development** - Items that should only be done at the end of development or before releases
   - Final documentation review
   - Performance optimization
   - Accessibility audit
   - Cross-browser testing
   - Release preparation tasks
   - **MANDATORY**: Review this section before marking any release as complete

### When to Create Todos

- Complex tasks requiring multiple steps
- Features that need implementation
- Bugs that need fixing
- Refactoring work
- Documentation updates
- Any task that cannot be completed in a single action

### Where to Place Todos

- **Tasks section**: Regular development work, features, bugs, refactoring
- **Active Checks section**: Ongoing requirements that need regular verification
- **End of Development section**: Tasks that should only be done at the end (e.g., "final documentation review", "accessibility audit")

## Quality Assurance Checklist (After Every Task)

**MANDATORY**: After completing ANY task, the agent MUST perform ALL of the following (see [RULES](RULES) for the fundamental rule):

1. **Confirm Implementation**
   - Verify the feature/code works as intended
   - Test the functionality manually if possible
   - Ensure the implementation matches requirements

2. **Run Lint**
   - Execute linting commands in the relevant package(s)
   - Fix ALL linting issues
   - Do not proceed until linting passes

3. **Run Build**
   - Execute build commands in the relevant package(s)
   - Fix ALL build errors
   - Do not proceed until build succeeds

4. **Test Functionality**
   - Ensure the feature works correctly
   - Test edge cases if applicable
   - Verify no regressions were introduced

5. **Keep Code Simple**
   - Review the code for unnecessary complexity
   - Refactor if code is overly complicated
   - Prefer simple, readable solutions

6. **Update Todo List**
   - **MANDATORY**: Mark completed tasks in TODO.md
   - Update status from ðŸ”„ (in progress) to âœ… (completed)
   - Only mark complete after all quality checks pass
   - **MUST** update todo status after EVERY task completion, not just at the end

7. **Update Documentation**
   - **MANDATORY**: At the end of every feature implementation, update ALL documentation:
     - All README files (.md files) in the repository
     - Component documentation if applicable
     - Code comments if logic changed
     - Component APIs and props documentation if applicable
     - Agent instructions if workflow or standards changed
   - Ensure documentation accurately reflects the current implementation
   - Verify examples are functional and up-to-date

**DO NOT skip any of these steps. They are mandatory for every task completion.**

## Code Standards

**MANDATORY**: Follow all guidelines in the project documentation regarding:

- Code standards and styling guidelines
- Package-specific guidelines (if applicable)
- Architecture decisions
- Component usage requirements (if applicable)

The agent must enforce these project guidelines during all development work.

## User Command Handling

> **IMPORTANT**: All command documentation has been moved to [COMMANDS](COMMANDS). Please refer to that file for complete command documentation.

For fundamental command handling rules, see [RULES](RULES).

## Getting Help

If you encounter issues or are unsure about implementation:

1. Check existing code for similar patterns
2. Review examples in the project if available
3. Check the TODO.md for related tasks
4. Review project documentation for project guidelines
5. Review [RULES](RULES) for fundamental rules
6. Review agent instructions (this file) for detailed procedures
7. Follow the quality assurance checklist
